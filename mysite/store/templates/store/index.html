{% extends 'base.html' %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link rel="stylesheet" href="{% static 'css/store.css' %}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style type="text/css"></style>
{% if user.is_authenticated %} 
    <h3 class="menuTitle">Store Management</h3>
    <form method="GET" id="selectForm">
        <div class="searchForm">
            <select name="input-loc" id="selectSearchLoc" class="select" onChange="selectedLoc()">
                <option value="all" selected>Location</option>
                {% for loc in loc %}
                <option value="{{loc.str_loc}}">{{loc.str_loc}}</option>
                {% endfor %}
            </select>
            <select name="input-city" id="selectSearchCity" class="select" onChange="selectedCity()">
                <option value="all" selected>City</option>
                {% for city in city %}
                <option value="{{city.str_city}}">{{city.str_city}}</option>
                {% endfor %}
            </select>
            <input type="submit" id="btnSearch" value="üîçÔ∏é">
            <input type="reset" id="btnReset" value="Reset" onclick="resetForm()">
        </div>
        <p id="pCount">Êï∏ÊìöÊï∏ : {{data.count}} Ê¢ù</p>
        <div class="dataGrid">
            <table class="tableGrid" id="myTable">
                <thead class="sticky-element">
                    <tr>
                        <th><B>ÂçÄÂüü</B></th>
                        <th><B>Á∏£Â∏Ç</B></th>
                        <th><B>ÈñÄÂ∏Ç‰ª£Ëôü</B></th>
                        <th><B>ÈñÄÂ∏ÇÂêçÁ®±</B></th>
                    </tr>
                </thead>
                <tbody id="datafield">
                    {% if data %}
                    {% for data in data %}
                    <tr>
                        <td>{{data.str_loc}}</td>
                        <td>{{data.str_city}}</td>
                        <td>{{data.str_code}}</td>
                        <td>{{data.str_name}}</td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="4"><B>No Data</B></td>
                    </tr>
                    {% endif %}
                <tbody>
            </table>
        </div>
    </form>
    <form action="/store/update/" method="POST" id="dataForm">{% csrf_token %}
        <div class="dataInput">
            <table>
                <thead class="sticky-element">
                    <tr>
                        <th colspan="2">Store Info</th>
                    </tr>
                </thead>
                <tbody class="sticky-element">
                    <tr>
                        <td>ÂçÄÂüü</td>
                        <td>
                            <select name="info-loc" id="first-select" class="select">
                                {% for loc in loc %}
                                <option value="{{loc.str_loc}}">{{loc.str_loc}}</option>
                                {% endfor %}
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Á∏£Â∏Ç</td>
                        <td>
                            <select name="info-city" id="second-select" class="select">
                                {% comment %} {% for city in city %}
                                <option value="{{city.str_city}}">{{city.str_city}}</option>
                                {% endfor %} {% endcomment %}
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>ÈñÄÂ∏Ç‰ª£Ëôü</td>
                        <td><input type="text" name="info-code" id="dataCode" class="inputText" readonly></td>
                    </tr>
                    <tr>
                        <td>ÈñÄÂ∏ÇÂêçÁ®±</td>
                        <td><input type="text" name="info-name" id="dataName" class="inputText" readonly></td>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="submit" id="btnUpdate" value="Update" onclick="return updateField();"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </form>
{% else %}
    <meta http-equiv="refresh" content="0; url='/users/login'" />
{% endif %}
<script>
</script>
<script src="{% static 'script/store.js' %}"></script>
{% endblock %}